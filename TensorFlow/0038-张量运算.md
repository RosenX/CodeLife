# 张量运算

## 标量运算

加减乘除乘方，以及三角函数，指数，对数等常见函数，逻辑比较运算符等都是标量运算符。标量运算符的特点是对张量实施逐元素运算。

有些标量运算符对常用的数学运算符进行了重载。并且支持类似numpy的广播特性。

```python
a = tf.constant([[1.0,2],[-3,4.0]])
b = tf.constant([[5.0,6],[7.0,8.0]])

# 算术运算符
a+b
a-b
a*b
a/b
a**2
a**(0.5)
a%3
a//3

# 比较运算符
a>=2
(a>=2)&(a<=3)
(a>=2)|(a<=3)
a==5

# 函数
tf.sqrt(a)

a = tf.constant([1.0,8.0])
b = tf.constant([5.0,6.0])
c = tf.constant([6.0,7.0])
tf.add_n([a,b,c]) # 所有元素相加 => (12, 21)

tf.print(tf.maximum(a,b)) # 对应位置元素比较
tf.print(tf.minimum(a,b))
```

## 向量运算

向量运算符只在一个特定轴上运算，将一个向量映射到一个标量或者另外一个向量。 许多向量运算符都以reduce开头。

```python
a = tf.range(1,10)
tf.print(tf.reduce_sum(a))
tf.print(tf.reduce_mean(a))
tf.print(tf.reduce_max(a))
tf.print(tf.reduce_min(a))
tf.print(tf.reduce_prod(a))

b = tf.reshape(a,(3,3))
# axis指定在哪一轴运算，运算完之后那一轴会变成1
# keepdims=true, 原来是多少维，运算完之后还是多少维，否则会减一维
tf.print(tf.reduce_sum(b, axis=1, keepdims=True)) 
tf.print(tf.reduce_sum(b, axis=0, keepdims=True))

#bool类型的reduce
p = tf.constant([True,False,False])
q = tf.constant([False,False,True])
tf.print(tf.reduce_all(p)) #=> 0
tf.print(tf.reduce_any(q)) #=> 1

# tf.foldr：从最后一个元素往前做reduce操作
s = tf.foldr(lambda a,b:a-b,tf.reshape(tf.range(1,10), (3,3)))
tf.print(s)
```