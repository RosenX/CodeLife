# 汤普森采样

在推荐系统中冷启是一个很重要的环节，汤普森采样是一种最简单的冷启方法。
## Beta分布

参考笔记[Beta分布](../../数学/0005-beta分布.md)

## 具体原理

Beta分布有两个重要性质：
1. 当$\alpha+\beta$越大，方差越下，概率密度函数越窄。
2. 当$\alpha/(\alpha+\beta)$越大，均值越大。

如果把$\alpha$当做曝光点击次数，$\beta$当做曝光未点击次数，beta分布的性质适用于推荐场景：当曝光次数$\alpha+\beta$增多，beta分布越窄，item的分数越来越确定；当$ctr=\alpha/(\alpha+\beta)$越大，得到的分数也越大。

具体步骤：
1. 取出每一个候选对应的参数$\alpha$和$\beta$；（初始值可以都取1，等同于均值分布，或者按实际点击率设一个）
2. 为每个候选用$\alpha$和$\beta$作为参数，用贝塔分布产生一个随机数；
3. 按照随机数排序，输出最大值对应的候选；
4. 观察用户反馈，如果用户点击则将对应候选的$\alpha$加 1，否则$\beta$加 1